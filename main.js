!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this.handleCardClick=n,this._likes=e.likes,this._likesTotal=e.likes.length,this.handleCardDelete=r,this.owner=e.owner,this.userId=o,this._cardId=e._id,this.addLike=i,this.removeLike=u},(n=[{key:"_getTemplate",value:function(){return this._cardElement=document.querySelector("#template-elements").content.querySelector(".element").cloneNode(!0),this._cardElement}},{key:"_setProperties",value:function(){var t=this;this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".element__image"),this._cardImage.alt="Fotografia de ".concat(this._name),this._cardImage.src=this._link,this._cardTitle=this._card.querySelector(".element__title").textContent=this._name,this._buttonLikeCard=this._card.querySelector(".element__button-like"),this._buttonDeleteCard=this._card.querySelector(".element__button-trash"),this.owner._id!==this.userId&&this._buttonDeleteCard.remove(),this.likesCount=this._card.querySelector(".element__likes").textContent=this._likesTotal,(this.userLike=this._likes.some((function(e){return e._id===t.userId})))?this._buttonLikeCard.classList.add("element__button-like_active"):this._buttonLikeCard.classList.remove("element__button-like_active")}},{key:"_handleLikebtn",value:function(){var t=this;this._buttonLikeCard.classList.contains("element__button-like_active")?this.removeLike(this._cardId).then((function(e){t.likesCount=t._card.querySelector(".element__likes").textContent=e.likes.length,t._buttonLikeCard.classList.remove("element__button-like_active")})).catch((function(t){return console.log(t)})):this.addLike(this._cardId).then((function(e){t._buttonLikeCard.classList.add("element__button-like_active"),t.likesCount=t._card.querySelector(".element__likes").textContent=e.likes.length})).catch((function(t){return console.log(t)}))}},{key:"handleOpenCard",value:function(){this.handleCardClick(this._cardTitle,this._link)}},{key:"handleDeleteCard",value:function(){this._card.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLikeCard.addEventListener("click",(function(){t._handleLikebtn()})),this._buttonDeleteCard.addEventListener("click",(function(){t.handleCardDelete()})),this._cardImage.addEventListener("click",(function(){t.handleOpenCard()}))}},{key:"generateCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var a=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=e,this._settings=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)},(e=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._submitButton.classList.add(this._settings.inactiveButtonClass):this._submitButton.classList.remove(this._settings.inactiveButtonClass)}},{key:"_showInputError",value:function(t,e){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),this._errorElement.textContent=e,t.classList.add(this._settings.inputErrorClass),this._errorElement.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),this._errorElement.textContent="",t.classList.remove(this._settings.inputErrorClass),this._errorElement.classList.remove(this._settings.errorClass)}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var f=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=n},(e=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.append(t)}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),y=document.querySelector(".elements"),p=(document.querySelector("#popup-imagen"),document.querySelector("#button__close-showimage")),h=document.querySelector("#button__close-delete"),d=document.querySelector("#button__card-delete"),m=document.querySelector(".profile__edit-button"),b=document.querySelector(".profile__add-button"),v=document.querySelector(".profile__avatar-circle"),_=document.querySelectorAll(".popup__button-close"),g=Array.from(document.querySelectorAll(".form")),k=(document.querySelector(".form__button-save"),document.querySelector("form__button-addimage"),document.querySelector("#profile-name")),S=document.querySelector("#profile-aboutme"),E=document.querySelector("#change-avatar"),w={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var P=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._overlay=document.querySelector("#cover")},(e=[{key:"open",value:function(){this._popupElement.classList.add("popup-show"),this._overlay.classList.add("popup__overlay")}},{key:"close",value:function(){this._popupElement.classList.remove("popup-show"),this._overlay.classList.remove("popup__overlay")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._overlay.addEventListener("click",(function(){t.close()})),_.forEach((function(e){e.addEventListener("click",(function(){t.close()}))})),p.addEventListener("click",(function(){t.close()})),h.addEventListener("click",(function(){t.close()})),document.addEventListener("keydown",(function(e){t._handleEscClose(e)}))}}])&&j(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function T(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}function q(t,e,n){return e=A(e),function(t,e){if(e&&("object"==O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,n||[],A(t).constructor):e.apply(t,n))}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},B.apply(null,arguments)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}var x=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=q(this,e,[t])).handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".popup"),r._inputList=Array.from(r._formElement.querySelectorAll(".form__input")),r._submitButtons=r._formElement.querySelector(".form__button"),r._getInputValues=r._getInputValues.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t=this;return this.formValues={},this._inputList.forEach((function(e){t.formValues[e.name]=e.value})),this.formValues}},{key:"close",value:function(){B(A(e.prototype),"close",this).call(this),this._formElement.reset(),"place"===this._submitButtons.name?this._submitButtons.textContent="Crear":this._submitButtons.textContent="Guardar"}},{key:"_handleLoading",value:function(){this._submitButtons.textContent="Guardando..."}},{key:"setEventListeners",value:function(){var t=this;B(A(e.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t.handleFormSubmit(t._getInputValues()),t._handleLoading()}))}}])&&I(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(P);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var G=function(){return t=function t(e){var n=e.name,r=e.about,o=e.avatar,i=e.id;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=n,this._userAboutme=r,this._userAvatar=o,this._userId=i,this.profileName=document.querySelector(".profile__name"),this.profileAbout=document.querySelector(".profile__about-me"),this.profileAvatar=document.querySelector(".profile__avatar"),this.userValues={name:"",about:""}},(e=[{key:"getUserInfo",value:function(){return this.userValues.name=this.profileName.textContent,this.userValues.about=this._userAboutme,this.userValues}},{key:"setUserInfo",value:function(t){this._userName=t.name,this.profileName.textContent=t.name,this._userAboutme=t.about,this.profileAbout.textContent=t.about,this._userAvatar=t.avatar,this.profileAvatar.style.backgroundImage="url(".concat(t.avatar,")"),this._userId=t._id}},{key:"setUserAvatar",value:function(t){this.profileAvatar.style.backgroundImage="url(".concat(t.avatar,")")}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}function J(t){var e=function(t,e){if("object"!=F(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==F(e)?e:e+""}var z=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=e.baseUrl,this.headers=e.headers},(e=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"editUserInfo",value:function(t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"addNewCard",value:function(t){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"likeCard",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"removeCard",value:function(t){return fetch("".concat(this.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"addLikeCard",value:function(t){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).then((function(t){return t}))}},{key:"removeLikeCard",value:function(t){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).then((function(t){return t}))}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t.avatar})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}}])&&H(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t,e){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function W(t,e,n){return e=Z(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,X()?Reflect.construct(e,n||[],Z(t).constructor):e.apply(t,n))}function X(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(X=function(){return!!t})()}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Y.apply(null,arguments)}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}var tt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=W(this,e,[t])).handleCardClick=n.handleCardClick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),n=e,(r=[{key:"handleCardClick",value:function(t,n){this._showImage=document.querySelector(".popup-imagen__review"),this._showSubtitle=document.querySelector(".popup-imagen__subtitle"),this._showImage.alt="Fotografia de ".concat(t),this._showImage.src=n,this._showSubtitle.textContent=t,Y(Z(e.prototype),"open",this).call(this)}},{key:"close",value:function(){Y(Z(e.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){Y(Z(e.prototype),"setEventListeners",this).call(this)}}])&&K(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(P);function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function rt(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:e+""}function ot(t,e,n){return e=at(e),function(t,e){if(e&&("object"==et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,it()?Reflect.construct(e,n||[],at(t).constructor):e.apply(t,n))}function it(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(it=function(){return!!t})()}function ut(){return ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ut.apply(null,arguments)}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}var st=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ot(this,e,[t])).deleteConfirmationBtn=document.querySelector("#button__card-delete"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(e,t),n=e,(r=[{key:"close",value:function(){ut(at(e.prototype),"close",this).call(this)}},{key:"setHandleDelete",value:function(t){this.handleDelete=t}},{key:"setEventListeners",value:function(){var t=this;ut(at(e.prototype),"setEventListeners",this).call(this),this.deleteConfirmationBtn.addEventListener("click",(function(){t.deleteConfirmationBtn.textContent="Guardando...",t.handleDelete()}))}}])&&nt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(P);document.getElementById("header-logo").src="50fce9df697a07971411.svg";var lt=new z({baseUrl:"https://around.nomoreparties.co/v1/web_es_11",headers:{authorization:"d71d6b20-43e5-4a1a-bc6b-4b351d1b9544","Content-Type":"application/json; charset=UTF-8"}}),ft=new G({name:"",about:"",avatar:"",id:""});lt.getUserInfo().then((function(t){ft.setUserInfo(t)}));var yt=new tt("#popup-imagen"),pt=new st("#popup-delete");function ht(t){var e=new r(t,yt.handleCardClick,(function(){pt.open(),pt.setHandleDelete((function(){lt.removeCard(t._id).then((function(){e.handleDeleteCard()})).catch((function(t){console.log(t)})).finally((function(){d.textContent="Si",pt.close()}))}))}),ft._userId,lt.addLikeCard.bind(lt),lt.removeLikeCard.bind(lt));return e}function dt(){g.forEach((function(t){new a(t,w).enableValidation()}))}function mt(){g.forEach((function(t){new a(t,w).resetValidation()}))}function bt(){g.forEach((function(t){new a(t,w)._toggleButtonState()}))}yt.setEventListeners(),pt.setEventListeners(),lt.getInitialCards().then((function(t){var e=new f({items:t,renderer:function(t){var n=ht(t).generateCard();e.addItem(n)}},y);e.renderItems()})).catch((function(t){console.log(t)}));var vt=new x("#popup-profile",(function(t){lt.editUserInfo(t).then((function(t){ft.setUserInfo(t)})).catch((function(t){console.log(t)})).finally((function(){vt.close()}))})),_t=new x("#popup-addimage",(function(t){lt.addNewCard(t).then((function(t){var e=ht(t).generateCard();y.prepend(e)})).catch((function(t){console.log(t)})).finally((function(){_t.close()}))}));m.addEventListener("click",(function(){vt.open(),lt.getUserInfo().then((function(t){ft.setUserInfo(t);var e=ft.getUserInfo();k.value=e.name,S.value=e.about,dt()})).catch((function(t){console.log(t)})),bt(),mt()})),b.addEventListener("click",(function(){_t.open(),dt(),bt(),mt()}));var gt=new x("#popup-change_avatar",(function(t){lt.editUserAvatar(t).then((function(t){E.value=ft.setUserAvatar(t)})).catch((function(t){console.log(t)})).finally((function(){gt.close()}))}));v.addEventListener("click",(function(){gt.open(),dt(),bt(),mt()})),vt.setEventListeners(),_t.setEventListeners(),gt.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDdUksU0FBUSxXQUNQdUIsR0FBaUIzRixPQUNuQixHQUNKLElBQ0FYLEVBQW9CcEQsaUJBQWlCLFNBQVMsV0FDNUMwSixHQUFpQjNCLE9BQ2pCTyxLQUNBSSxLQUNBRixJQUNGLElBQ0FXLEdBQWFSLG9CQUNiWSxHQUFjWixvQkFDZGUsR0FBaUJmLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICB1c2VySWQsXG4gICAgYWRkTGlrZSxcbiAgICByZW1vdmVMaWtlXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fbGlrZXNUb3RhbCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuaGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gICAgdGhpcy5vd25lciA9IGRhdGEub3duZXI7XG4gICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5hZGRMaWtlID0gYWRkTGlrZTtcbiAgICB0aGlzLnJlbW92ZUxpa2UgPSByZW1vdmVMaWtlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI3RlbXBsYXRlLWVsZW1lbnRzXCIpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBGb3RvZ3JhZmlhIGRlICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi1saWtlXCIpO1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLXRyYXNoXCIpO1xuICAgIGlmICh0aGlzLm93bmVyLl9pZCAhPT0gdGhpcy51c2VySWQpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMubGlrZXNDb3VudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlc1wiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9saWtlc1RvdGFsO1xuICAgIGlmIChcbiAgICAgICh0aGlzLnVzZXJMaWtlID0gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMudXNlcklkKSlcbiAgICApIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19idXR0b24tbGlrZV9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19idXR0b24tbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUxpa2VidG4oKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLnJlbW92ZUxpa2UodGhpcy5fY2FyZElkKVxuICAgICAgICAudGhlbigobGlrZXMpID0+IHtcbiAgICAgICAgICB0aGlzLmxpa2VzQ291bnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBcIi5lbGVtZW50X19saWtlc1wiXG4gICAgICAgICAgKS50ZXh0Q29udGVudCA9IGxpa2VzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICB0aGlzLl9idXR0b25MaWtlQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkTGlrZSh0aGlzLl9jYXJkSWQpXG4gICAgICAgIC50aGVuKChsaWtlcykgPT4ge1xuICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19idXR0b24tbGlrZV9hY3RpdmVcIik7XG4gICAgICAgICAgdGhpcy5saWtlc0NvdW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgXCIuZWxlbWVudF9fbGlrZXNcIlxuICAgICAgICAgICkudGV4dENvbnRlbnQgPSBsaWtlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVPcGVuQ2FyZCgpIHtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkVGl0bGUsIHRoaXMuX2xpbmspO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlYnRuKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDYXJkRGVsZXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZU9wZW5DYXJkKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0UHJvcGVydGllcygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkQ29udGFpbmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY2FyZENvbnRhaW5lcjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgZWxlbWVudENvbnRhaW5kZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwT3BlbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1pbWFnZW5cIik7XG5leHBvcnQgY29uc3QgY2xvc2VTaG93SW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNidXR0b25fX2Nsb3NlLXNob3dpbWFnZVwiXG4pO1xuZXhwb3J0IGNvbnN0IGNsb3NlU2hvd0RlbGV0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2J1dHRvbl9fY2xvc2UtZGVsZXRlXCJcbik7XG5leHBvcnQgY29uc3QgZGVsZXRlQ29uZmlybWF0aW9uQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjYnV0dG9uX19jYXJkLWRlbGV0ZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUNoYW5nZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1jaXJjbGVcIlxuKTtcbmV4cG9ydCBjb25zdCBjbG9zZUZvcm1CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICBcIi5wb3B1cF9fYnV0dG9uLWNsb3NlXCJcbik7XG5leHBvcnQgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybVwiKSk7XG5leHBvcnQgY29uc3Qgc2F2ZVByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvbi1zYXZlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEltYWdlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1fX2J1dHRvbi1hZGRpbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgZm9ybUlucHV0QWJvdXRtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hYm91dG1lXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1JbnB1dEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hhbmdlLWF2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiaW1wb3J0IHtcbiAgY2xvc2VGb3JtQnV0dG9uLFxuICBjbG9zZVNob3dJbWFnZUJ1dHRvbixcbiAgY2xvc2VTaG93RGVsZXRlQnRuLFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9vdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3ZlclwiKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtc2hvd1wiKTtcbiAgICB0aGlzLl9vdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3ZlcmxheVwiKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLXNob3dcIik7XG4gICAgdGhpcy5fb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX292ZXJsYXlcIik7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICBjbG9zZUZvcm1CdXR0b24uZm9yRWFjaCgoY2xvc2VCdXR0b24pID0+IHtcbiAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNsb3NlU2hvd0ltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgY2xvc2VTaG93RGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcbiAgICB0aGlzLl9nZXRJbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzLmJpbmQodGhpcyk7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b25zLm5hbWUgPT09IFwicGxhY2VcIikge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy50ZXh0Q29udGVudCA9IFwiQ3JlYXJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlTG9hZGluZygpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25zLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxvYWRpbmcoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIsIGlkIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0bWUgPSBhYm91dDtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gYXZhdGFyO1xuICAgIHRoaXMuX3VzZXJJZCA9IGlkO1xuICAgIHRoaXMucHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG4gICAgdGhpcy5wcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIpO1xuICAgIHRoaXMucHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuICAgIHRoaXMudXNlclZhbHVlcyA9IHsgbmFtZTogXCJcIiwgYWJvdXQ6IFwiXCIgfTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLnVzZXJWYWx1ZXMubmFtZSA9IHRoaXMucHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy51c2VyVmFsdWVzLmFib3V0ID0gdGhpcy5fdXNlckFib3V0bWU7XG4gICAgcmV0dXJuIHRoaXMudXNlclZhbHVlcztcbiAgfVxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl91c2VyQWJvdXRtZSA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5wcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkYXRhLmF2YXRhcjtcbiAgICB0aGlzLnByb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2RhdGEuYXZhdGFyfSlgO1xuICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEuX2lkO1xuICB9XG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHRoaXMucHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7ZGF0YS5hdmF0YXJ9KWA7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG4gIGFkZE5ld0NhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgbGlrZUNhcmQoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuICBhZGRMaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KTtcbiAgfVxuICByZW1vdmVMaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KTtcbiAgfVxuICBlZGl0VXNlckF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gdGhpcy5oYW5kbGVDYXJkQ2xpY2suYmluZCh0aGlzKTtcbiAgfVxuICBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICAgIHRoaXMuX3Nob3dJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtaW1hZ2VuX19yZXZpZXdcIik7XG4gICAgdGhpcy5fc2hvd1N1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1pbWFnZW5fX3N1YnRpdGxlXCIpO1xuICAgIHRoaXMuX3Nob3dJbWFnZS5hbHQgPSBgRm90b2dyYWZpYSBkZSAke25hbWV9YDtcbiAgICB0aGlzLl9zaG93SW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9zaG93U3VidGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5kZWxldGVDb25maXJtYXRpb25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J1dHRvbl9fY2FyZC1kZWxldGVcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG4gIHNldEhhbmRsZURlbGV0ZShoYW5kbGVEZWxldGUpIHtcbiAgICB0aGlzLmhhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZGVsZXRlQ29uZmlybWF0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmRlbGV0ZUNvbmZpcm1hdGlvbkJ0bi50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XG4gICAgICB0aGlzLmhhbmRsZURlbGV0ZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IGxvZ29TcmMgZnJvbSBcIi4uL2ltYWdlcy9sb2dvX2Fyb3VuZFVTQS5zdmdcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIGVsZW1lbnRDb250YWluZGVyLFxuICBmb3JtTGlzdCxcbiAgcHJvZmlsZUJ1dHRvbixcbiAgcHJvZmlsZUFkZEJ1dHRvbixcbiAgZGVsZXRlQ29uZmlybWF0aW9uQnRuLFxuICBzZXR0aW5ncyxcbiAgZm9ybUlucHV0TmFtZSxcbiAgZm9ybUlucHV0QWJvdXRtZSxcbiAgZm9ybUlucHV0QXZhdGFyLFxuICBwcm9maWxlQ2hhbmdlQXZhdGFyLFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXItbG9nb1wiKTtcbmxvZ29JbWFnZS5zcmMgPSBsb2dvU3JjO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18xMVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJkNzFkNmIyMC00M2U1LTRhMWEtYmM2Yi00YjM1MWQxYjk1NDRcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLThcIixcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWU6IFwiXCIsXG4gIGFib3V0OiBcIlwiLFxuICBhdmF0YXI6IFwiXCIsXG4gIGlkOiBcIlwiLFxufSk7XG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXN1bHQpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbn0pO1xuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwb3B1cC1pbWFnZW5cIik7XG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjcG9wdXAtZGVsZXRlXCIpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gY3JlYXRlZENhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgaXRlbSxcbiAgICBwb3B1cEltYWdlLmhhbmRsZUNhcmRDbGljayxcbiAgICAoKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZS5vcGVuKCk7XG4gICAgICBwb3B1cERlbGV0ZS5zZXRIYW5kbGVEZWxldGUoKCkgPT4ge1xuICAgICAgICBhcGlcbiAgICAgICAgICAucmVtb3ZlQ2FyZChpdGVtLl9pZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uQnRuLnRleHRDb250ZW50ID0gXCJTaVwiO1xuICAgICAgICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdXNlckluZm8uX3VzZXJJZCxcbiAgICBhcGkuYWRkTGlrZUNhcmQuYmluZChhcGkpLFxuICAgIGFwaS5yZW1vdmVMaWtlQ2FyZC5iaW5kKGFwaSlcbiAgKTtcbiAgcmV0dXJuIGNhcmQ7XG59XG5cbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlZENhcmQoaXRlbSk7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGVsZW1lbnRDb250YWluZGVyXG4gICAgKTtcblxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25Gb3JtKCkge1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGZvcm1zVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICBmb3Jtc1ZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uRm9ybSgpIHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBmb3Jtc1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgZm9ybXNWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdG9nZ2xlQnV0dG9uRm9ybSgpIHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB0b2dnbGVCdXR0b24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIHRvZ2dsZUJ1dHRvbi5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfSk7XG59XG5cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwLXByb2ZpbGVcIiwgKGlucHV0cykgPT4ge1xuICBhcGlcbiAgICAuZWRpdFVzZXJJbmZvKGlucHV0cylcbiAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hZGRpbWFnZVwiLCAoaW5wdXRzKSA9PiB7XG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKGlucHV0cylcbiAgICAudGhlbigoaW5wdXQpID0+IHtcbiAgICAgIGNvbnN0IGFkZENhcmRFbGVtZW50ID0gY3JlYXRlZENhcmQoaW5wdXQpO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhZGRDYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKTtcblxuICAgICAgZWxlbWVudENvbnRhaW5kZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQWRkSW1hZ2UuY2xvc2UoKTtcbiAgICB9KTtcbn0pO1xuXG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XG5cbiAgYXBpXG4gICAgLmdldFVzZXJJbmZvKClcbiAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gICAgICBjb25zdCB1c2VyVmFsdWVzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICAgIGZvcm1JbnB1dE5hbWUudmFsdWUgPSB1c2VyVmFsdWVzLm5hbWU7XG4gICAgICBmb3JtSW5wdXRBYm91dG1lLnZhbHVlID0gdXNlclZhbHVlcy5hYm91dDtcbiAgICAgIHZhbGlkYXRpb25Gb3JtKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcblxuICB0b2dnbGVCdXR0b25Gb3JtKCk7XG4gIHJlc2V0VmFsaWRhdGlvbkZvcm0oKTtcbn0pO1xucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZEltYWdlLm9wZW4oKTtcbiAgdmFsaWRhdGlvbkZvcm0oKTtcbiAgdG9nZ2xlQnV0dG9uRm9ybSgpO1xuICByZXNldFZhbGlkYXRpb25Gb3JtKCk7XG59KTtcbmNvbnN0IHBvcHVwUGhvdG9DaGFuZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1jaGFuZ2VfYXZhdGFyXCIsIChpbnB1dHMpID0+IHtcbiAgYXBpXG4gICAgLmVkaXRVc2VyQXZhdGFyKGlucHV0cylcbiAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgZm9ybUlucHV0QXZhdGFyLnZhbHVlID0gdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBQaG90b0NoYW5nZS5jbG9zZSgpO1xuICAgIH0pO1xufSk7XG5wcm9maWxlQ2hhbmdlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUGhvdG9DaGFuZ2Uub3BlbigpO1xuICB2YWxpZGF0aW9uRm9ybSgpO1xuICB0b2dnbGVCdXR0b25Gb3JtKCk7XG4gIHJlc2V0VmFsaWRhdGlvbkZvcm0oKTtcbn0pO1xucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEFkZEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFBob3RvQ2hhbmdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwidXNlcklkIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfbGlrZXNUb3RhbCIsImxlbmd0aCIsIm93bmVyIiwiX2NhcmRJZCIsIl9pZCIsImtleSIsInZhbHVlIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzIiwiX2NhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiYWx0IiwiY29uY2F0Iiwic3JjIiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50IiwiX2J1dHRvbkxpa2VDYXJkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJyZW1vdmUiLCJsaWtlc0NvdW50IiwidXNlckxpa2UiLCJzb21lIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsIl90aGlzMiIsImNvbnRhaW5zIiwidGhlbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIl90aGlzMyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZWJ0biIsImhhbmRsZU9wZW5DYXJkIiwiX3NldFByb3BlcnRpZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJTZWN0aW9uIiwiX3JlZiIsImNhcmRDb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJlbGVtZW50Q29udGFpbmRlciIsImNsb3NlU2hvd0ltYWdlQnV0dG9uIiwiY2xvc2VTaG93RGVsZXRlQnRuIiwiZGVsZXRlQ29uZmlybWF0aW9uQnRuIiwicHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlQ2hhbmdlQXZhdGFyIiwiY2xvc2VGb3JtQnV0dG9uIiwiZm9ybUxpc3QiLCJmb3JtSW5wdXROYW1lIiwiZm9ybUlucHV0QWJvdXRtZSIsImZvcm1JbnB1dEF2YXRhciIsImZvcm1TZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfb3ZlcmxheSIsImNsb3NlIiwiY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9jYWxsU3VwZXIiLCJfc3VibWl0QnV0dG9ucyIsIl9nZXRJbnB1dFZhbHVlcyIsImJpbmQiLCJfaW5oZXJpdHMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FsbCIsInJlc2V0IiwiX2hhbmRsZUxvYWRpbmciLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dG1lIiwiX3VzZXJBdmF0YXIiLCJfdXNlcklkIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlQXZhdGFyIiwidXNlclZhbHVlcyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJyZXN1bHQiLCJQb3B1cFdpdGhJbWFnZSIsIl9zaG93SW1hZ2UiLCJfc2hvd1N1YnRpdGxlIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlRGVsZXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBJbWFnZSIsInBvcHVwRGVsZXRlIiwiY3JlYXRlZENhcmQiLCJjYXJkIiwib3BlbiIsInNldEhhbmRsZURlbGV0ZSIsInJlbW92ZUNhcmQiLCJoYW5kbGVEZWxldGVDYXJkIiwiZmluYWxseSIsImFkZExpa2VDYXJkIiwicmVtb3ZlTGlrZUNhcmQiLCJ2YWxpZGF0aW9uRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb25Gb3JtIiwicmVzZXRWYWxpZGF0aW9uIiwidG9nZ2xlQnV0dG9uRm9ybSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBQcm9maWxlIiwiaW5wdXRzIiwiZWRpdFVzZXJJbmZvIiwidXNlciIsInBvcHVwQWRkSW1hZ2UiLCJhZGROZXdDYXJkIiwicHJlcGVuZCIsInBvcHVwUGhvdG9DaGFuZ2UiLCJlZGl0VXNlckF2YXRhciIsInNldFVzZXJBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9